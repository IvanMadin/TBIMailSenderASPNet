@model IEnumerable<EmailViewModel>
<th>Email Id</th>
<th>Date Received</th>
<th>Sender</th>
<th>Subject</th>
@if (Model.Any(e => e.EmailStatusName.StartsWith("Not")))
{
    <th>Status</th>
    <th>Attachments</th>
}
@if (Model.Any(e => e.EmailStatusName.StartsWith("New") && !e.EmailStatusName.StartsWith("Not") && !e.EmailStatusName.StartsWith("Open") && !e.EmailStatusName.StartsWith("Closed") && !e.EmailStatusName.StartsWith("Invalid")))
{
    <th>CurrentStatus Since</th>
    if (User.IsInRole("Manager"))
    {
        //TODO: Кой User е сложил в този статус.
    }
}
@if (Model.Any(e => e.EmailStatusName.StartsWith("Open") && !e.EmailStatusName.StartsWith("Not") && !e.EmailStatusName.StartsWith("New") && !e.EmailStatusName.StartsWith("Closed") && !e.EmailStatusName.StartsWith("Invalid")))
{
    <th>CurrentStatus Since</th>
}
@if (Model.Any(e => e.EmailStatusName.StartsWith("Closed") && !e.EmailStatusName.StartsWith("Not") && !e.EmailStatusName.StartsWith("New") && !e.EmailStatusName.StartsWith("Open") && !e.EmailStatusName.StartsWith("Invalid")))
{
}
@if (Model.Any(e => e.EmailStatusName.StartsWith("Invalid") && !e.EmailStatusName.StartsWith("Not") && !e.EmailStatusName.StartsWith("New") && !e.EmailStatusName.StartsWith("Open") && !e.EmailStatusName.StartsWith("Closed")))
{
}
<th>View</th>